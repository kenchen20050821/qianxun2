(function(b){var c=[],l=[],e=[],m=[],r=[],n=[],p=[],s=[],d=[],t=[],g=[],q=[];b.fn.coinslider=b.fn.CoinSlider=function(u){init=function(a){l[a.id]=[];e[a.id]=[];m[a.id]=[];r[a.id]=[];n[a.id]=[];p[a.id]=[];d[a.id]=0;g[a.id]=0;q[a.id]=1;c[a.id]=b.extend({},b.fn.coinslider.defaults,u);b.each(obj.hotpics,function(b,c){e[a.id][b]="http://localhost:2012/"+c.img;m[a.id][b]=c.url;r[a.id][b]="_blank";n[a.id][b]=c.title;p[a.id][b]=c.message});b(a).css({"background-image":"url("+e[a.id][0]+")",width:c[a.id].width,
height:c[a.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+a.id+"' />");b("#"+a.id).append("<div class='cs-title' id='cs-title-"+a.id+"' style='position: absolute;top:240px; left: 0; z-index: 1000;'></div>");b("#"+a.id).append("<div class='cs-message' id='cs-message-"+a.id+"' style='position: absolute; top:270px; left: 0;z-index:999;'></div>");b.setFields(a);c[a.id].navigation&&b.setNavigation(a);b.transition(a,0);b.transitionCall(a)};
b.setFields=function(a){tWidth=sWidth=parseInt(c[a.id].width/c[a.id].spw);tHeight=sHeight=parseInt(c[a.id].height/c[a.id].sph);counter=sLeft=sTop=0;tgapx=gapx=c[a.id].width-c[a.id].spw*sWidth;tgapy=gapy=c[a.id].height-c[a.id].sph*sHeight;for(i=1;i<=c[a.id].sph;i++){gapx=tgapx;0<gapy?(gapy--,sHeight=tHeight+1):sHeight=tHeight;for(j=1;j<=c[a.id].spw;j++)0<gapx?(gapx--,sWidth=tWidth+1):sWidth=tWidth,l[a.id][counter]=i+""+j,counter++,c[a.id].links?b("#"+a.id).append("<a href='"+m[a.id][0]+"' class='cs-"+
a.id+"' id='cs-"+a.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></a>"):b("#"+a.id).append("<div class='cs-"+a.id+"' id='cs-"+a.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></div>"),b("#cs-"+a.id+i+j).css({"background-position":-sLeft+"px "+(-sTop+"px"),left:sLeft,top:sTop}),sLeft+=sWidth;sTop+=sHeight;sLeft=0}b(".cs-"+a.id).mouseover(function(){b("#cs-navigation-"+a.id).show()});b(".cs-"+a.id).mouseout(function(){b("#cs-navigation-"+
a.id).hide()});b("#cs-title-"+a.id).mouseover(function(){b("#cs-navigation-"+a.id).show()});b("#cs-title-"+a.id).mouseout(function(){b("#cs-navigation-"+a.id).hide()});c[a.id].hoverPause&&(b(".cs-"+a.id).mouseover(function(){c[a.id].pause=!0}),b(".cs-"+a.id).mouseout(function(){c[a.id].pause=!1}),b("#cs-title-"+a.id).mouseover(function(){c[a.id].pause=!0}),b("#cs-title-"+a.id).mouseout(function(){c[a.id].pause=!1}))};b.transitionCall=function(a){clearInterval(s[a.id]);delay=c[a.id].delay+c[a.id].spw*
c[a.id].sph*c[a.id].sDelay;s[a.id]=setInterval(function(){b.transition(a)},delay)};b.transition=function(a,f){!0!=c[a.id].pause&&(b.effect(a),g[a.id]=0,t[a.id]=setInterval(function(){b.appereance(a,l[a.id][g[a.id]])},c[a.id].sDelay),b(a).css({"background-image":"url("+e[a.id][d[a.id]]+")"}),"undefined"==typeof f?d[a.id]++:"prev"==f?d[a.id]--:d[a.id]=f,d[a.id]==e[a.id].length&&(d[a.id]=0),-1==d[a.id]&&(d[a.id]=e[a.id].length-1),b(".cs-button-"+a.id).removeClass("cs-active"),b("#cs-button-"+a.id+"-"+
(d[a.id]+1)).addClass("cs-active"),n[a.id][d[a.id]]?b("#cs-title-"+a.id).html(n[a.id][d[a.id]]):b("#cs-title-"+a.id).css("opacity",0),p[a.id][d[a.id]]?b("#cs-message-"+a.id).html(p[a.id][d[a.id]]):b("#cs-message-"+a.id).css("opacity",0))};b.appereance=function(a,f){b(".cs-"+a.id).attr("href",m[a.id][d[a.id]]).attr("target",r[a.id][d[a.id]]);g[a.id]==c[a.id].spw*c[a.id].sph?clearInterval(t[a.id]):(b("#cs-"+a.id+f).css({opacity:0,"background-image":"url("+e[a.id][d[a.id]]+")"}),b("#cs-"+a.id+f).animate({opacity:1},
300),g[a.id]++)};b.setNavigation=function(a){b(a).append("<div id='cs-navigation-"+a.id+"'></div>");b("#cs-navigation-"+a.id).hide();b("#cs-navigation-"+a.id).append("<a href='#' id='cs-prev-"+a.id+"' class='cs-prev'>prev</a>");b("#cs-navigation-"+a.id).append("<a href='#' id='cs-next-"+a.id+"' class='cs-next'>next</a>");b("#cs-prev-"+a.id).css({position:"absolute",top:c[a.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:c[a.id].opacity}).click(function(c){c.preventDefault();b.transition(a,
"prev");b.transitionCall(a)}).mouseover(function(){b("#cs-navigation-"+a.id).show()});b("#cs-next-"+a.id).css({position:"absolute",top:c[a.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:c[a.id].opacity}).click(function(c){c.preventDefault();b.transition(a);b.transitionCall(a)}).mouseover(function(){b("#cs-navigation-"+a.id).show()});b("<div id='cs-buttons-"+a.id+"' class='cs-buttons'></div>").appendTo(b("#coin-slider-"+a.id));for(k=1;k<e[a.id].length+1;k++)b("#cs-buttons-"+a.id).append("<a href='#' class='cs-button-"+
a.id+"' id='cs-button-"+a.id+"-"+k+"'>"+k+"</a>");b.each(b(".cs-button-"+a.id),function(c,d){b(d).click(function(d){b(".cs-button-"+a.id).removeClass("cs-active");b(this).addClass("cs-active");d.preventDefault();b.transition(a,c);b.transitionCall(a)})});b("#cs-navigation-"+a.id+" a").mouseout(function(){b("#cs-navigation-"+a.id).hide();c[a.id].pause=!1});b("#cs-buttons-"+a.id).css({left:"80%","margin-left":15*-e[a.id].length/2-5,position:"relative"})};b.effect=function(a){effA=["random","swirl","rain",
"straight"];eff=""==c[a.id].effect?effA[Math.floor(Math.random()*effA.length)]:c[a.id].effect;l[a.id]=[];if("random"==eff){counter=0;for(i=1;i<=c[a.id].sph;i++)for(j=1;j<=c[a.id].spw;j++)l[a.id][counter]=i+""+j,counter++;b.random(l[a.id])}"rain"==eff&&b.rain(a);"swirl"==eff&&b.swirl(a);"straight"==eff&&b.straight(a);q[a.id]*=-1;0<q[a.id]&&l[a.id].reverse()};b.random=function(a){var b=a.length;if(0==b)return!1;for(;--b;){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c];a[c]=d}};b.swirl=function(a){for(var f=
c[a.id].sph,d=c[a.id].spw,e=1,h=1,o=0,g=0,m=0,n=!0;n;){g=0==o||2==o?d:f;for(i=1;i<=g;i++)if(l[a.id][m]=e+""+h,m++,i!=g)switch(o){case 0:h++;break;case 1:e++;break;case 2:h--;break;case 3:e--}o=(o+1)%4;switch(o){case 0:d--;h++;break;case 1:f--;e++;break;case 2:d--;h--;break;case 3:f--,e--}check=b.max(f,d)-b.min(f,d);d<=check&&f<=check&&(n=!1)}};b.rain=function(a){for(var b=c[a.id].sph,d=c[a.id].spw,e=0,h=to2=from=1,g=!0;g;){for(i=from;i<=h;i++)l[a.id][e]=i+""+parseInt(to2-i+1),e++;to2++;h<b&&to2<d&&
b<d&&h++;h<b&&b>=d&&h++;to2>d&&from++;from>h&&(g=!1)}};b.straight=function(a){counter=0;for(i=1;i<=c[a.id].sph;i++)for(j=1;j<=c[a.id].spw;j++)l[a.id][counter]=i+""+j,counter++};b.min=function(a,b){return a>b?b:a};b.max=function(a,b){return a<b?b:a};this.each(function(){init(this)})};b.fn.coinslider.defaults={width:565,height:350,spw:7,sph:5,delay:3E3,sDelay:30,opacity:0.7,titleSpeed:500,effect:"",navigation:!0,links:!0,hoverPause:!0}})(jQuery);